{% extends "index.html" %}
{% block content %}
<h2 class="Novo-Usuário">Registrar Novo Usuário</h2>
<form method="POST">
  <input type="text" name="fullname" placeholder="Nome Completo" required><br>
  <input type="email" name="email" placeholder="Email Institucional" required><br>
  <input type="password" name="password" placeholder="Senha" required><br>

  <label for="role">Selecione seu papel:</label><br>
  <select name="role" id="role" required>
    <option value="student">Estudante</option>
    <option value="professor">Professor</option>
    <option value="admin">Administrador</option>
  </select><br><br>

  <div id="curso-container">
    <label for="curso">Selecione o curso:</label><br>
    <select name="curso" id="curso" required>
      <option value="">-- Escolha um curso --</option>
      {% for c in cursos %}
        <option value="{{ c.nome }}">{{ c.nome }}</option>
      {% endfor %}
    </select><br><br>
  </div>

  <button type="submit">Registrar</button>
</form>

<p>Já possui uma conta? <a href="{{ url_for('login') }}">Faça login</a></p>

<script>
  const roleSelect = document.getElementById("role");
  const cursoContainer = document.getElementById("curso-container");

  function toggleCursoSelect() {
    cursoContainer.style.display = roleSelect.value === "student" ? "block" : "none";
  }

  roleSelect.addEventListener("change", toggleCursoSelect);
  toggleCursoSelect(); // executa na inicialização
</script>
{% endblock %}
